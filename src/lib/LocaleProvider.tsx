import React, { createContext, useContext, useMemo, useState } from 'react';

type Locale = 'fr' | 'en';

const translations: Record<Locale, Record<string, string>> = {
    fr: {
        toast_download: 'Votre CV a été téléchargé.',
        toast_error: "Impossible de télécharger le CV.",
        nav_home: 'Accueil',
        nav_about: 'À propos',
        nav_skills: 'Compétences',
        nav_projects: 'Projets',
        nav_experience: 'Expériences',
        nav_parcours: 'Parcours',
        nav_interests: 'Intérêts',
        nav_contact: 'Contact',
        hero_hello: 'Bonjour, je suis',
        hero_title_role: 'Développeur Full-Stack & Étudiant M1 MIAGE',
        hero_description: "Curieux et rigoureux, je me spécialise dans le développement web et la conception d'applications innovantes. Je suis à la recherche d'une alternance en développement pour contribuer à des projets concrets et approfondir mes compétences techniques.",
        hero_cta_contact: 'Me contacter',
        hero_download_cv: 'Télécharger CV',
        about_title: 'À propos de moi',
        about_p1: "Étudiant en Master 1 Informatique (MIAGE), je me spécialise dans le développement web et la conception d'applications innovantes. Curieux, rigoureux et motivé, je recherche une alternance en développement pour approfondir mes compétences et contribuer activement à des projets concrets.",
        about_p2: "J'ai travaillé sur des projets variés : sites web (recettes, e-commerce), applications temps réel (enchères, chat), et jeux en Java. J'utilise des technologies telles que HTML, CSS, JavaScript, PHP (Laravel), MySQL, ainsi que des outils de design comme Figma.",
        about_p3: "Passionné par la qualité logicielle et la cybersécurité, je m'intéresse également aux architectures distribuées, à l'automatisation des tests et à l'expérience utilisateur.",
        projects_title: 'Mes Projets',
        projects_sub: "Une sélection de projets sur lesquels j'ai travaillé, démontrant mes compétences en développement.",
        skills_sub: "Technologies et outils que je maîtrise pour créer des applications performantes.",
        skills_title: 'Mes Compétences',
        parcours_title: 'Mon Parcours',
        parcours_sub: 'Parcours universitaire et formations suivies.',
        interests_title: "Centres d'intérêt",
        interests_sub: "Au-delà du code, voici ce qui me passionne et me motive au quotidien.",
        interest_photo_title: 'Photographie',
        interest_photo_desc: 'Capturer des moments et travailler la composition visuelle.',
        interest_travel_title: 'Voyages',
        interest_travel_desc: 'Découvrir de nouvelles cultures et inspirations pour mes projets.',
        interest_sport_title: 'Sport',
        interest_sport_desc: "Activité physique régulière pour garder l'esprit clair et productif.",
        interest_dev_title: 'Développement logiciel',
        interest_dev_desc: "Conception, algorithmes et implémentation d'applications fiables.",
        interest_book_title: 'Cybersécurité & Algorithmes',
        interest_book_desc: 'Sécurité des données, cryptographie et optimisation des systèmes.',
        interest_music_title: 'Streaming / Photographie',
        interest_music_desc: 'Création de contenu et retouche photo pour partager mes expériences.',
        interest_video_title: 'Montage Vidéo',
        interest_video_desc: 'Création et édition de vidéos pour raconter des histoires visuelles.',
        interest_video_not_supported: 'Votre navigateur ne supporte pas la lecture de vidéos.',

        // Projects
        project_kanban_title: 'Kanban',
        project_kanban_desc: "Kanban est un outil visuel de gestion des tâches et du flux de travail. Il se présente généralement comme un tableau divisé en colonnes (À faire, En cours, Terminé). Les tâches sont représentées par des cartes que l'on déplace de colonne en colonne au fur et à mesure de leur avancement.",
        project_delidefi_title: 'Deli Defi',
        project_delidefi_desc: "Deli Defi est un jeu créé sur App Inventor 2 pour Android : chaque jour tu as des défis aléatoires à accomplir, constitués de mini-jeux (Flappy Bird, jeu de tir, mémoire, énigmes, ...).",
        project_bubbleti_title: 'Bubbleti',
        project_bubbleti_desc: "Bubbleti est un système de prise de commandes, paiement et affichage des commandes prêtes/en cours pour un salon de bubble tea. Développé en React + TypeScript + Tailwind.",
        project_bubbele_title: 'Bubbele',
        project_bubbele_desc: "Bubbele est un jeu où tu prends soin d'un personnage Dragon : le nourrir, le doucher, l'emmener aux toilettes et le faire dormir. Il contient aussi des mini-jeux pour gagner des points et acheter des déguisements en boutique. Codé en React + TypeScript + Tailwind.",
        project_recettes_title: 'Site de partage de recettes',
        project_recettes_desc: "Développement d'un site de partage de recettes avec interface interactive et gestion des utilisateurs.",
        project_ecommerce_title: 'Site e-commerce',
        project_ecommerce_desc: "Conception d'une boutique en ligne avec gestion des transactions, utilisateurs et catalogue.",
        project_shmup_title: 'Jeu vidéo (shmup)',
        project_shmup_desc: 'Conception et programmation d\'un jeu de type shoot – em up en Java.',
        project_velo_title: 'Système de location de vélos',
        project_velo_desc: "Système autonome de location de vélos avec gestion des stations et des locations.",
        project_encheres_title: 'Application d\'enchères en temps réel',
        project_encheres_desc: "Application d'enchères en temps réel avec communication via WebSocket et backend Node.js.",
        project_railroad_title: 'Railroad Ink (numérique)',
        project_railroad_desc: "Version numérique du jeu multijoueur, gestion réseau et interface interactive.",

        // Experience
        experience_title: 'Mes Experiences',
        experience_sub: 'Mon évolution professionnelle à travers différentes entreprises et projets.',
        exp_frontend_title: 'Développement Frontend et Workflow (Stage)',
        exp_frontend_company: 'Tech Link Service',
        exp_frontend_period: '2025',
        exp_frontend_desc: "Développement d'une solution SaaS de gestion de restaurants et intégration de commandes externes sur une interface centralisée.",
        exp_frontend_h1: 'React / Flutterflow',
        exp_frontend_h2: 'TypeScript / JavaScript',
        exp_frontend_h3: 'Intégrations API (Uber Eats, Deliveroo)',
        exp_web_title: 'Développement Web (Stage)',
        exp_web_company: 'Equipe MAROCVILLE',
        exp_web_period: '2022',
        exp_web_desc: "Développement d'une application de gestion (stocks, commandes, clients) avec Laravel et MySQL.",
        exp_web_h1: 'Laravel & MySQL',
        exp_web_h2: "Design d'interface",
        exp_web_h3: 'Automatisation des tests',
        exp_crepes_title: 'Employé polyvalent',
        exp_crepes_company: 'Crêpes Corner',
        exp_crepes_period: '2024',
        exp_crepes_desc: 'Mission en point de vente, gestion du service client et polyvalence opérationnelle.',
        exp_crepes_h1: 'Service client',
        exp_crepes_h2: 'Travail en équipe',
        exp_crepes_h3: 'Adaptabilité',
        exp_magasinier_title: 'Magasinier',
        exp_magasinier_company: 'Equipe MAROCVILLE',
        exp_magasinier_period: '—',
        exp_magasinier_desc: "Réception et documentation des produits, contrôle des colis endommagés, rangement sur étagères et assistance aux préparateurs de commandes pour le ramassage et l'emballage.",
        exp_magasinier_h1: 'Réception & contrôle',
        exp_magasinier_h2: 'Gestion des stocks',
        exp_magasinier_h3: 'Préparation de commandes',
        exp_snack_title: 'Employé polyvalent',
        exp_snack_company: 'Snack O mimosas',
        exp_snack_period: '—',
        exp_snack_desc: "Accueil et prise de commandes, préparation rapide et précise des plats, service clientèle, et entretien des zones de préparation et de salle en respectant les normes d'hygiène.",
        exp_snack_h1: 'Accueil & prise de commandes',
        exp_snack_h2: 'Préparation & propreté',
        exp_snack_h3: 'Hygiène alimentaire',
        exp_uber_title: 'Livreur de commandes',
        exp_uber_company: 'Uber Eats',
        exp_uber_period: '—',
        exp_uber_desc: "Livraison rapide et sécurisée des commandes, utilisation efficace des outils de navigation et interaction professionnelle avec les clients.",
        exp_uber_h1: 'Livraison & navigation',
        exp_uber_h2: 'Relation client',
        exp_uber_h3: 'Entretien du véhicule',
        exp_security_title: 'Agent de sécurité (événement)',
        exp_security_company: 'Match de football (Ligue 1)',
        exp_security_period: '—',
        exp_security_desc: "Assurer la sécurité des spectateurs et du personnel, appliquer les mesures de contrôle et coopérer avec les forces de l'ordre pour prévenir les incidents.",
        exp_security_h1: 'Sécurité événementielle',
        exp_security_h2: 'Contrôle des foules',
        exp_security_h3: 'Coordination opérationnelle',
        exp_rgis_title: 'Inventoriste',
        exp_rgis_company: 'RGIS',
        exp_rgis_period: 'Depuis mai 2025',
        exp_rgis_desc: "Réalisation d'inventaires dans le nord de la France : comptage, validation et remontée des écarts, travail en équipe et rigueur des données.",
        exp_rgis_h1: 'Inventaires régionaux',
        exp_rgis_h2: 'Précision & fiabilité',
        exp_rgis_h3: 'Travail en équipe',

        contact_title: 'Me Contacter',
        contact_sub: "Vous avez un projet en tête ? N'hésitez pas à me contacter pour en discuter.",
        contact_discuss_title: 'Discutons ensemble',
        contact_discuss_paragraph: "Je suis toujours ouvert aux nouvelles opportunités, collaborations et discussions. Que ce soit pour un projet, une question ou simplement pour dire bonjour !",
        contact_email_label: 'Email',
        contact_phone_label: 'Téléphone',
        contact_location_label: 'Localisation',
        form_name_label: 'Nom complet',
        form_name_placeholder: 'Votre nom',
        form_email_placeholder: 'votre@email.com',
        form_message_placeholder: 'Votre message...',
        form_submit: 'Envoyer le message',
        toast_message_sent: 'Message envoyé avec succès !',
        toast_message_error: "Erreur lors de l'envoi du message. Veuillez réessayer.",
        form_sending: 'Envoi en cours...',
        video_cta: 'Découvrez mon portfolio à travers mon île interactive !',
    },
    en: {
        toast_download: 'Your CV has been downloaded.',
        toast_error: 'Unable to download the CV.',
        nav_home: 'Home',
        nav_about: 'About',
        nav_skills: 'Skills',
        nav_projects: 'Projects',
        nav_experience: 'Experience',
        nav_parcours: 'Journey',
        nav_interests: 'Interests',
        nav_contact: 'Contact',
        hero_hello: "Hello, I'm",
        hero_title_role: 'Full-Stack Developer & M1 MIAGE Student',
        hero_description: "Curious and rigorous, I specialize in web development and designing innovative applications. I'm looking for a development apprenticeship to contribute to real projects and deepen my technical skills.",
        hero_cta_contact: 'Contact me',
        hero_download_cv: 'Download CV',
        about_title: 'About me',
        about_p1: "Master 1 Computer Science (MIAGE) student specializing in web development and application design. Curious, rigorous and motivated, I'm looking for a development apprenticeship to deepen my skills and contribute to real projects.",
        about_p2: "I have worked on varied projects: websites (recipes, e-commerce), real-time applications (auctions, chat), and games in Java. I use technologies such as HTML, CSS, JavaScript, PHP (Laravel), MySQL, and design tools like Figma.",
        about_p3: "Passionate about software quality and cybersecurity, I'm also interested in distributed architectures, test automation and user experience.",
        projects_title: 'My Projects',
        projects_sub: 'A selection of projects I worked on, showcasing my development skills.',
        skills_sub: 'Technologies and tools I master to build performant applications.',
        skills_title: 'My Skills',
        parcours_title: 'My Journey',
        parcours_sub: 'Academic background and training followed.',
        interests_title: 'Interests',
        interests_sub: 'Beyond code, here are things that inspire and motivate me daily.',
        interest_photo_title: 'Photography',
        interest_photo_desc: 'Capturing moments and working on visual composition.',
        interest_travel_title: 'Travel',
        interest_travel_desc: 'Discovering new cultures and inspiration for my projects.',
        interest_sport_title: 'Sport',
        interest_sport_desc: 'Regular physical activity to keep a clear and productive mind.',
        interest_dev_title: 'Software Development',
        interest_dev_desc: 'Design, algorithms and implementing reliable applications.',
        interest_book_title: 'Cybersecurity & Algorithms',
        interest_book_desc: 'Data security, cryptography and system optimization.',
        interest_music_title: 'Streaming / Photography',
        interest_music_desc: 'Content creation and photo editing to share my experiences.',
        interest_video_title: 'Video Editing',
        interest_video_desc: 'Creating and editing videos to tell visual stories.',
        interest_video_not_supported: 'Your browser does not support video playback.',

        // Projects
        project_kanban_title: 'Kanban',
        project_kanban_desc: "Kanban is a visual tool for task management and workflow. It is usually presented as a board divided into columns (To do, In progress, Done). Tasks are represented by cards that are moved from column to column as they progress.",
        project_delidefi_title: 'Deli Defi',
        project_delidefi_desc: "Deli Defi is a game created on App Inventor 2 for Android: every day you have random challenges to complete, made up of mini-games (Flappy Bird, shooting game, memory, puzzles, ...).",
        project_bubbleti_title: 'Bubbleti',
        project_bubbleti_desc: "Bubbleti is an order taking, payment and display system for ready/in-progress orders for a bubble tea shop. Developed in React + TypeScript + Tailwind.",
        project_bubbele_title: 'Bubbele',
        project_bubbele_desc: "Bubbele is a game where you take care of a Dragon character: feed it, shower it, take it to the toilet and put it to sleep. It also contains mini-games to earn points and buy costumes in the shop. Coded in React + TypeScript + Tailwind.",
        project_recettes_title: 'Recipe sharing site',
        project_recettes_desc: "Development of a recipe sharing site with interactive interface and user management.",
        project_ecommerce_title: 'E-commerce site',
        project_ecommerce_desc: "Design of an online store with transaction, user and catalog management.",
        project_shmup_title: 'Video game (shmup)',
        project_shmup_desc: 'Design and programming of a shoot – em up type game in Java.',
        project_velo_title: 'Bike rental system',
        project_velo_desc: "Autonomous bike rental system with station and rental management.",
        project_encheres_title: 'Real-time auction application',
        project_encheres_desc: "Real-time auction application with WebSocket communication and Node.js backend.",
        project_railroad_title: 'Railroad Ink (digital)',
        project_railroad_desc: "Digital version of the multiplayer game, network management and interactive interface.",

        // Experience
        experience_title: 'My Experience',
        experience_sub: 'My professional evolution through different companies and projects.',
        exp_frontend_title: 'Frontend Development and Workflow (Internship)',
        exp_frontend_company: 'Tech Link Service',
        exp_frontend_period: '2025',
        exp_frontend_desc: "Development of a SaaS restaurant management solution and integration of external orders on a centralized interface.",
        exp_frontend_h1: 'React / Flutterflow',
        exp_frontend_h2: 'TypeScript / JavaScript',
        exp_frontend_h3: 'API Integrations (Uber Eats, Deliveroo)',
        exp_web_title: 'Web Development (Internship)',
        exp_web_company: 'Team MAROCVILLE',
        exp_web_period: '2022',
        exp_web_desc: "Development of a management application (stocks, orders, customers) with Laravel and MySQL.",
        exp_web_h1: 'Laravel & MySQL',
        exp_web_h2: "Interface design",
        exp_web_h3: 'Test automation',
        exp_crepes_title: 'Multi-purpose employee',
        exp_crepes_company: 'Crêpes Corner',
        exp_crepes_period: '2024',
        exp_crepes_desc: 'Point of sale mission, customer service management and operational versatility.',
        exp_crepes_h1: 'Customer service',
        exp_crepes_h2: 'Teamwork',
        exp_crepes_h3: 'Adaptability',
        exp_magasinier_title: 'Warehouse worker',
        exp_magasinier_company: 'Team MAROCVILLE',
        exp_magasinier_period: '—',
        exp_magasinier_desc: "Receiving and documenting products, checking damaged packages, arranging on shelves and assisting order pickers with picking and packing.",
        exp_magasinier_h1: 'Receiving & control',
        exp_magasinier_h2: 'Inventory management',
        exp_magasinier_h3: 'Order preparation',
        exp_snack_title: 'Multi-purpose employee',
        exp_snack_company: 'Snack O mimosas',
        exp_snack_period: '—',
        exp_snack_desc: "Welcoming and taking orders, quick and accurate meal preparation, customer service, and maintaining preparation and dining areas in accordance with hygiene standards.",
        exp_snack_h1: 'Welcome & order taking',
        exp_snack_h2: 'Preparation & cleanliness',
        exp_snack_h3: 'Food hygiene',
        exp_uber_title: 'Delivery driver',
        exp_uber_company: 'Uber Eats',
        exp_uber_period: '—',
        exp_uber_desc: "Fast and secure order delivery, efficient use of navigation tools and professional interaction with customers.",
        exp_uber_h1: 'Delivery & navigation',
        exp_uber_h2: 'Customer relations',
        exp_uber_h3: 'Vehicle maintenance',
        exp_security_title: 'Security agent (event)',
        exp_security_company: 'Football match (Ligue 1)',
        exp_security_period: '—',
        exp_security_desc: "Ensuring the safety of spectators and staff, applying control measures and cooperating with law enforcement to prevent incidents.",
        exp_security_h1: 'Event security',
        exp_security_h2: 'Crowd control',
        exp_security_h3: 'Operational coordination',
        exp_rgis_title: 'Inventory clerk',
        exp_rgis_company: 'RGIS',
        exp_rgis_period: 'Since May 2025',
        exp_rgis_desc: "Conducting inventories in northern France: counting, validation and reporting discrepancies, teamwork and data rigor.",
        exp_rgis_h1: 'Regional inventories',
        exp_rgis_h2: 'Precision & reliability',
        exp_rgis_h3: 'Teamwork',

        contact_title: 'Contact Me',
        contact_sub: "Have a project in mind? Don't hesitate to reach out to discuss.",
        contact_discuss_title: 'Let’s Talk',
        contact_discuss_paragraph: "I'm always open to new opportunities, collaborations and conversations. Whether it's a project, a question, or just to say hi!",
        contact_email_label: 'Email',
        contact_phone_label: 'Phone',
        contact_location_label: 'Location',
        form_name_label: 'Full name',
        form_name_placeholder: 'Your name',
        form_email_placeholder: 'your@email.com',
        form_message_placeholder: 'Your message...',
        form_submit: 'Send message',
        toast_message_sent: 'Message sent successfully!',
        toast_message_error: 'Error sending message. Please try again.',
        form_sending: 'Sending...',
        video_cta: 'Discover my portfolio through my interactive island!',
    },
};

const LocaleContext = createContext<{
    locale: Locale;
    setLocale: (l: Locale) => void;
    t: (key: string) => string;
} | null>(null);

export const LocaleProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
    const [locale, setLocale] = useState<Locale>(() => {
        try {
            const stored = localStorage.getItem('locale');
            return (stored as Locale) || 'fr';
        } catch {
            return 'fr';
        }
    });

    const t = (key: string) => translations[locale][key] || key;

    const value = useMemo(() => ({ locale, setLocale, t }), [locale]);

    return <LocaleContext.Provider value={value}>{children}</LocaleContext.Provider>;
};

export const useLocale = () => {
    const ctx = useContext(LocaleContext);
    if (!ctx) throw new Error('useLocale must be used within LocaleProvider');
    return ctx;
};

export default LocaleProvider;
